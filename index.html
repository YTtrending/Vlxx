<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video List</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .video-card { transition: transform 0.2s; }
        .video-card:hover { transform: scale(1.02); }
        .pagination-btn { padding: 8px 16px; margin: 0 4px; }
        .pagination-btn.active { background-color: #2563eb; color: white; }
        .pagination-btn:disabled { background-color: #e5e7eb; cursor: not-allowed; }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-6 text-center">Video Gallery</h1>
        <div id="video-list" class="space-y-4"></div>
        <div id="pagination" class="flex justify-center mt-6 space-x-2"></div>
    </div>

    <script>
        async function loadVideos() {
            try {
                // Fetch JSON data from data.txt
                const response = await fetch('data.txt');
                if (!response.ok) throw new Error('Failed to load data.txt');
                const data = await response.json();

                const videosPerPage = 20;
                let currentPage = 1;

                function displayVideos(page) {
                    const start = (page - 1) * videosPerPage;
                    const end = start + videosPerPage;
                    const paginatedVideos = data.slice(start, end);

                    const videoList = document.getElementById('video-list');
                    videoList.innerHTML = '';

                    paginatedVideos.forEach(video => {
                        const videoCard = document.createElement('div');
                        videoCard.className = 'video-card bg-white p-4 rounded-lg shadow-md flex';
                        videoCard.innerHTML = `
                            <a href="${video.link}" target="_blank" class="flex-shrink-0">
                                <img src="${video.thumbnail}" alt="${video.title}" class="w-32 h-32 object-cover rounded">
                            </a>
                            <div class="ml-4 flex-1">
                                <a href="${video.link}" target="_blank" class="text-xl font-semibold text-blue-600 hover:underline">${video.title}</a>
                                <p class="text-gray-600 mt-2">${video.description.substring(0, 150)}...</p>
                                <p class="text-sm text-gray-500 mt-1">Actress: ${video.actress} | Views: ${video.views} | Rating: ${video.rating}</p>
                                <p class="text-sm text-gray-500">Categories: ${video.categories}</p>
                            </div>
                        `;
                        videoList.appendChild(videoCard);
                    });

                    updatePagination();
                }

                function updatePagination() {
                    const totalPages = Math.ceil(data.length / videosPerPage);
                    const pagination = document.getElementById('pagination');
                    pagination.innerHTML = '';

                    // Previous button
                    const prevBtn = document.createElement('button');
                    prevBtn.className = 'pagination-btn bg-gray-200 rounded';
                    prevBtn.textContent = 'Previous';
                    prevBtn.disabled = currentPage === 1;
                    prevBtn.addEventListener('click', () => {
                        if (currentPage > 1) {
                            currentPage--;
                            displayVideos(currentPage);
                        }
                    });
                    pagination.appendChild(prevBtn);

                    // Page numbers
                    for (let i = 1; i <= totalPages; i++) {
                        const pageBtn = document.createElement('button');
                        pageBtn.className = `pagination-btn bg-gray-200 rounded ${i === currentPage ? 'active' : ''}`;
                        pageBtn.textContent = i;
                        pageBtn.addEventListener('click', () => {
                            currentPage = i;
                            displayVideos(currentPage);
                        });
                        pagination.appendChild(pageBtn);
                    }

                    // Next button
                    const nextBtn = document.createElement('button');
                    nextBtn.className = 'pagination-btn bg-gray-200 rounded';
                    nextBtn.textContent = 'Next';
                    nextBtn.disabled = currentPage === totalPages;
                    nextBtn.addEventListener('click', () => {
                        if (currentPage < totalPages) {
                            currentPage++;
                            displayVideos(currentPage);
                        }
                    });
                    pagination.appendChild(nextBtn);
                }

                displayVideos(currentPage);
            } catch (error) {
                console.error('Error loading videos:', error);
                const videoList = document.getElementById('video-list');
                videoList.innerHTML = '<p class="text-red-500 text-center">Error loading video data. Please check the data.txt file.</p>';
            }
        }

        // Load videos on page load
        window.onload = loadVideos;
    </script>
</body>
</html>
