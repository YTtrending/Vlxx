<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VLXX VIDEOS</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .video-card { transition: transform 0.2s; }
        .video-card:hover { transform: scale(1.02); }
        .pagination-btn { 
            padding: 10px 20px; 
            margin: 0 4px; 
            font-size: 1rem; 
            border-radius: 8px; 
            touch-action: manipulation; 
        }
        .pagination-btn.active { background-color: #2563eb; color: white; }
        .pagination-btn:disabled { background-color: #e5e7eb; cursor: not-allowed; }
        .page-input { width: 60px; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; }
        .thumbnail { width: 100%; height: auto; max-height: 300px; }
        @media (min-width: 640px) {
            .thumbnail { max-width: 300px; }
            .video-card { flex-direction: row; }
            .video-card .ml-4 { margin-left: 1rem; margin-top: 0; }
        }
        @media (max-width: 640px) {
            .video-card { flex-direction: column; }
            .video-card .ml-4 { margin-left: 0; margin-top: 1rem; }
            .text-xl { font-size: 1.125rem; }
            .text-sm { font-size: 0.875rem; }
            .container { padding: 1rem; }
            .thumbnail { max-height: 200px; }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-4 text-center sm:text-3xl">VLXX VIDEOS</h1>
        <div id="top-pagination" class="flex justify-center mb-6 space-x-2 flex-wrap"></div>
        <div id="video-list" class="space-y-4"></div>
        <div id="bottom-pagination" class="flex justify-center mt-6 space-x-2 flex-wrap"></div>
    </div>

    <script>
        async function loadVideos() {
            try {
                // Fetch JSON data from data.txt
                const response = await fetch('data.txt');
                if (!response.ok) throw new Error('Failed to load data.txt');
                const data = await response.json();

                const videosPerPage = 30;
                let currentPage = 1;

                function displayVideos(page) {
                    const start = (page - 1) * videosPerPage;
                    const end = start + videosPerPage;
                    const paginatedVideos = data.slice(start, end);

                    const videoList = document.getElementById('video-list');
                    videoList.innerHTML = '';

                    paginatedVideos.forEach(video => {
                        const videoCard = document.createElement('div');
                        videoCard.className = 'video-card bg-white p-4 rounded-lg shadow-md flex';
                        videoCard.innerHTML = `
                            <a href="${video.link}" target="_blank" class="flex-shrink-0">
                                <img src="${video.thumbnail}" alt="${video.title}" class="thumbnail object-cover rounded">
                            </a>
                            <div class="ml-4 flex-1">
                                <a href="${video.link}" target="_blank" class="text-lg font-semibold text-blue-600 hover:underline sm:text-xl">${video.title}</a>
                                <p class="text-gray-600 mt-2 text-sm sm:text-base description" data-full="${video.description}">${video.description.substring(0, 100)}...</p>
                                <button class="read-more text-blue-500 text-sm mt-1 hover:underline">Read More</button>
                                <p class="text-xs text-gray-500 mt-1 sm:text-sm">Actress: ${video.actress} | Views: ${video.views} | Rating: ${video.rating}%</p>
                                <p class="text-xs text-gray-500 sm:text-sm">${video.categories ? 'Categories: ' + video.categories : ''}</p>
                            </div>
                        `;
                        videoList.appendChild(videoCard);
                    });

                    // Add event listeners for "Read More" buttons
                    document.querySelectorAll('.read-more').forEach(button => {
                        button.addEventListener('click', () => {
                            const description = button.previousElementSibling;
                            const fullText = description.dataset.full;
                            if (description.textContent.includes('...')) {
                                description.textContent = fullText;
                                button.textContent = 'Read Less';
                            } else {
                                description.textContent = fullText.substring(0, 100) + '...';
                                button.textContent = 'Read More';
                            }
                        });
                    });

                    updatePagination();
                }

                function updatePagination() {
                    const totalPages = Math.ceil(data.length / videosPerPage);
                    const paginationContainers = ['top-pagination', 'bottom-pagination'];

                    paginationContainers.forEach(containerId => {
                        const pagination = document.getElementById(containerId);
                        pagination.innerHTML = '';

                        // Previous button
                        const prevBtn = document.createElement('button');
                        prevBtn.className = 'pagination-btn bg-gray-200 rounded';
                        prevBtn.textContent = 'Previous';
                        prevBtn.disabled = currentPage === 1;
                        prevBtn.addEventListener('click', () => {
                            if (currentPage > 1) {
                                currentPage--;
                                displayVideos(currentPage);
                            }
                        });
                        pagination.appendChild(prevBtn);

                        // Page numbers (show 2 pages before and after current page)
                        const startPage = Math.max(1, currentPage - 2);
                        const endPage = Math.min(totalPages, currentPage + 2);
                        for (let i = startPage; i <= endPage; i++) {
                            const pageBtn = document.createElement('button');
                            pageBtn.className = `pagination-btn bg-gray-200 rounded ${i === currentPage ? 'active' : ''}`;
                            pageBtn.textContent = i;
                            pageBtn.addEventListener('click', () => {
                                currentPage = i;
                                displayVideos(currentPage);
                            });
                            pagination.appendChild(pageBtn);
                        }

                        // Next button
                        const nextBtn = document.createElement('button');
                        nextBtn.className = 'pagination-btn bg-gray-200 rounded';
                        nextBtn.textContent = 'Next';
                        nextBtn.disabled = currentPage === totalPages;
                        nextBtn.addEventListener('click', () => {
                            if (currentPage < totalPages) {
                                currentPage++;
                                displayVideos(currentPage);
                            }
                        });
                        pagination.appendChild(nextBtn);

                        // Page input
                        const pageInput = document.createElement('input');
                        pageInput.type = 'number';
                        pageInput.min = 1;
                        pageInput.max = totalPages;
                        pageInput.value = currentPage;
                        pageInput.className = 'page-input';
                        pageInput.addEventListener('change', () => {
                            let newPage = parseInt(pageInput.value);
                            if (newPage >= 1 && newPage <= totalPages) {
                                currentPage = newPage;
                                displayVideos(currentPage);
                            } else {
                                pageInput.value = currentPage;
                            }
                        });
                        pagination.appendChild(pageInput);
                    });
                }

                displayVideos(currentPage);
            } catch (error) {
                console.error('Error loading videos:', error);
                const videoList = document.getElementById('video-list');
                videoList.innerHTML = '<p class="text-red-500 text-center text-sm sm:text-base">Error loading video data. Please check the data.txt file.</p>';
            }
        }

        // Load videos on page load
        window.onload = loadVideos;
    </script>
</body>
</html>
